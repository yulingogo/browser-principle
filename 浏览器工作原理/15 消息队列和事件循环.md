#### 1. 使用单线程处理安排好的任务

![img](https://static001.geekbang.org/resource/image/72/bc/72726678ac6604116c1d5dad160780bc.png)

#### 2. 在线程运行过程中处理新任务

要想在线程运行过程中，能接收并执行新的任务，就需要采用事件循环机制。

简述事件循环机制？

js是单线程执行的，为了在线程执行过程中接收并执行新任务，如用户点击等，就需要采用事件循环机制。



循环机制：在线程语句最后添加一个`for`循环，线程就会一直循环执行。

事件：在线程运行过程中，等待用户输入的数字，等待过程中线程处于暂停状态，一旦接收到用户输入信息，线程就会被激活，执行相应的操作。![img](https://static001.geekbang.org/resource/image/9e/e3/9e0f595324fbd5b7cd1c1ae1140f7de3.png)

#### 3. 处理其他线程发送过来的任务

![img](https://static001.geekbang.org/resource/image/2a/ab/2ac6bc0361cb4690c5cc83d8abad22ab.png)

+ 添加一个消息队列；

+ IO 线程中产生的新任务添加进消息队列尾部；

+ 渲染主线程会循环地从消息队列头部中读取任务，执行任务。

#### 4. 处理其他进程发送的任务

![img](https://static001.geekbang.org/resource/image/e2/c6/e2582e980632fd2df5043f81a11461c6.png)

渲染进程专门有一个 IO 线程用来接收其他进程传进来的消息，接收到消息之后，会将这些消息组装成任务发送给渲染主线程，后续的步骤就和前面讲解的“处理其他线程发送的任务”一样了。